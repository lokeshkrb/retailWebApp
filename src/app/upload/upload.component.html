<div class="container-fluid p-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="offset-sm-1">
                <h2>Upload your files here!</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6 offset-sm-1">
                <form [formGroup]="uploadForm">
                    <!--upload households-->
                    <div class="row">
                    <label for="file">Upload Households File</label>
                    </div>
                    <div class="form-group row pt-2 pb-2">
                        <div class="col col-lg-7">
                            <input type="file" #householdCsvReader formControlName="householdsFile" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.file.errors }" (change)="uploadHouseholdsListener($event)" accept=".csv"/>
                            <div class="progress" style="height: 5px;" *ngIf="hupload">
                                <div class="progress-bar progress-bar-striped" role="progressbar" [style.width]="hUploadPercentage + '%'" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                        <div class="col col-lg-1">
                            <span *ngIf="hloading" class="spinner-border"></span>
                        </div>
                        <div class="col col-lg-3" >
                            <button id="household button" [disabled]="hbutton" class="btn btn-primary" (click)="uploadHouseholds()">
                                <span   *ngIf="hupload" class="spinner-border spinner-border-sm mr-1"></span>
                                Upload
                            </button>
                        </div>
                    </div>
                    <div class="row" *ngIf="hupload">
                        <p>Uploaded... {{this.hChunckCount}}/{{this.householdsInChunks.length}}
                            <br>Households data is divided into {{this.householdsInChunks.length}} chunk(s).
                        </p>
                    </div>
                    <!--upload products-->
                    <div class="row">
                        <label for="file">Upload Product File</label>
                    </div>
                    <div class="form-group row pt-2 pb-2">
                        <div class="col col-lg-7">
                            <input type="file" #productCsvReader formControlName="productsFile" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.file.errors }" (change)="uploadProductsListener($event)"  accept=".csv"/>
                            <div class="progress" style="height: 5px;" *ngIf="pupload">
                                <div class="progress-bar progress-bar-striped" role="progressbar" [style.width]="pUploadPercentage + '%'" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                        <div class="col col-lg-1">
                            <span *ngIf="ploading" class="spinner-border"></span>
                        </div>
                        <div class="col col-lg-3">
                            <button [disabled]="pbutton" class="btn btn-primary" (click)="uploadProducts()">
                                <span *ngIf="pupload" class="spinner-border spinner-border-sm mr-1"></span>
                                Upload
                            </button>
                        </div>
                    </div>
                    <div class="row" *ngIf="pupload">
                        <p>Uploaded... {{this.pChunckCount}}/{{this.productsInChunks.length}}
                            <br>Products data is divided into {{this.productsInChunks.length}} chunk(s).
                        </p>
                    </div>
                    <!--upload transactions-->
                    <div class="row">
                        <label for="file">Upload Transaction File</label>
                    </div>
                    <div class="form-group row pt-2 pb-2">
                        <div class="col col-lg-7">
                            <input type="file" #transactionCsvReader formControlName="transactionsFile" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.file.errors }" (change)="uploadTransactionsListener($event)" accept=".csv"/>
                            <div class="progress" style="height: 5px;" *ngIf="tupload">
                                <div class="progress-bar progress-bar-striped" role="progressbar" [style.width]="tUploadPercentage + '%'" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                        <div class="col col-lg-1">
                            <span *ngIf="tloading" class="spinner-border"></span>
                        </div>
                        <div class="col col-lg-3">
                            <button [disabled]="tbutton" class="btn btn-primary" (click)="uploadTransactions()">
                                <span *ngIf="tupload" class="spinner-border spinner-border-sm mr-1"></span>
                                Upload
                            </button>
                        </div>
                    </div>
                    <div class="row" *ngIf="tupload">
                        <p>Uploaded... {{this.tChunckCount}}/{{this.transactionsInChunks.length}}
                            <br>Transactions data is divided into {{this.transactionsInChunks.length}} chunk(s).
                        </p>
                    </div>
                </form>
            </div>
            <div class="col-sm-5">
                <strong>Assumptions & Instructions:</strong>
                <p>1. User will upload correct files in the designated upload option.</p>
                <p>2. The file will have same number of columns and in the same order as in sample csv files.</p>
                <p>3. For any new houshold number or prodcut number, User will upload respective data before uploading transaction data.</p>
                <p>4. All transaction will have housould number and product number.</p>
                <p>5. Each houldhold number and product number in a trasaction will have coressponding data uploaded.</p>
                <p>6. Users will upload Household and Product data that is not provided in sample data and also there will be no duplicate household and product numbers in the new Households and Products files respectively.</p>
                <p>Note: If the number of records in the file are more than 10,000. Then the data will be divided into chunks of 10,000 records and uploaded one chunk at a time.</p>
            </div>
        </div>
    </div>
</div>